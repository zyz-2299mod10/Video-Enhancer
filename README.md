# NTU 2025 Fall Digital Image Processing Final Project

This project is to improve the image quality and to develop new functionalities of a USB camera. Use the images generated by the camera as the input of your algorithm(s).

## Install
```
conda create -n DIP python=3.10
conda activate DIP

pip install torch torchvision --index-url https://download.pytorch.org/whl/cu130 (Check your CUDA-torch version from https://pytorch.org/get-started/previous-versions/)
pip install -r requirements.txt

# for Real-ESRGAN
cd Real_ESRGAN
python setup.py develop
```

## Usage

### Video processing
Run the main script `main.py` to process videos:

```bash
python main.py --input <input_video_path> --output <output_video_path> [options]
```

### Options
- `--input`: Path to the input video file.
- `--output`: Path to save the processed video.
- `--demo`: Enable demo mode to draw debug information (Current Mode, Average Brightness) on the video frames.
- `--test`: Select the processing pipeline mode.
  - `light`: Only applying light enhancement.
  - `detail`: Only applying distortion correction.
  - `all` (default): Apply light enhancement followed by distortion correction.
- `--sr`: Enable Real-ESRGAN Super Resolution (Upscale x2 by default).

For online demo:
```bash
python demo.py --output <output_video_path> [--option]
```

### Options
- `--output`: Path to save the processed video.
- `--demo`: Enable demo mode to draw debug information (Current Mode, Average Brightness) on the video frames.
- `--test`: Select the processing pipeline mode.
  - `light`: Only applying light enhancement.
  - `detail`: Only applying distortion correction.
  - `all` (default): Apply light enhancement followed by distortion correction.
- `--sr`: Enable Real-ESRGAN Super Resolution (Upscale x2 by default).

## Requirements

-   Python 3.x
-   OpenCV (`opencv-python`)
-   NumPy
-   PyTorch
-   ffmpeg-python
-   BasicSR / Real-ESRGAN dependencies
